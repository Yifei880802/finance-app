<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»Ÿè®¡é¡µé¢æµ‹è¯• - ç²—é¢—ç²’åº¦è®°è´¦</title>
    
    <!-- å¤–éƒ¨èµ„æº -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <!-- ä¸»æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="./css/main.css">
    
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(180deg, #1C1C1E 0%, #1A1A1A 100%);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        }
        
        .test-container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-header h1 {
            color: #667eea;
            margin: 0;
        }
        
        .test-stats {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--border-radius-xl);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ç»Ÿè®¡é¡µé¢å›¾è¡¨æµ‹è¯•</h1>
            <p>æµ‹è¯•æ”¶æ”¯è¶‹åŠ¿å›¾è¡¨å’Œåˆ†ç±»ç»Ÿè®¡å›¾è¡¨</p>
        </div>
        
        <!-- æ—¶é—´ç­›é€‰å™¨ -->
        <div class="time-filter u-mb-lg">
            <div class="filter-tabs">
                <button class="filter-tab filter-tab--active" data-period="month">æœ¬æœˆ</button>
                <button class="filter-tab" data-period="quarter">è¿‘3æœˆ</button>
                <button class="filter-tab" data-period="half">è¿‘åŠå¹´</button>
                <button class="filter-tab" data-period="year">è¿‘ä¸€å¹´</button>
            </div>
        </div>

        <!-- ç»Ÿè®¡å¡ç‰‡ç½‘æ ¼ -->
        <div class="stats-grid grid-cols-2 u-gap-md u-mb-lg">
            <div class="stat-card stat-card--success">
                <div class="stat-card__icon">
                    <i class="fas fa-arrow-up"></i>
                </div>
                <div class="stat-card__value" data-stat="income">Â¥240,000</div>
                <div class="stat-card__label">æ€»æ”¶å…¥</div>
                <div class="stat-card__trend stat-card__trend--up">
                    <i class="fas fa-arrow-up stat-card__trend-icon"></i>
                    <span>+15.2%</span>
                </div>
            </div>
            
            <div class="stat-card stat-card--warning">
                <div class="stat-card__icon">
                    <i class="fas fa-arrow-down"></i>
                </div>
                <div class="stat-card__value" data-stat="expense">Â¥174,500</div>
                <div class="stat-card__label">æ€»æ”¯å‡º</div>
                <div class="stat-card__trend stat-card__trend--down">
                    <i class="fas fa-arrow-down stat-card__trend-icon"></i>
                    <span>-8.3%</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card__icon">
                    <i class="fas fa-wallet"></i>
                </div>
                <div class="stat-card__value" data-stat="balance">Â¥65,500</div>
                <div class="stat-card__label">ç»“ä½™</div>
                <div class="stat-card__trend stat-card__trend--up">
                    <i class="fas fa-arrow-up stat-card__trend-icon"></i>
                    <span>+28.7%</span>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-card__icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <div class="stat-card__value" data-stat="average">Â¥966</div>
                <div class="stat-card__label">æ—¥å‡æ”¯å‡º</div>
                <div class="stat-card__trend">
                    <span class="u-text-tertiary">æ¯å¤©</span>
                </div>
            </div>
        </div>

        <!-- è¶‹åŠ¿å›¾è¡¨ -->
        <div class="chart-card u-mb-lg">
            <div class="chart-card__header">
                <h3 class="chart-card__title">æ”¶æ”¯è¶‹åŠ¿</h3>
            </div>
            <div class="chart-card__body">
                <canvas id="trendChart" height="300"></canvas>
            </div>
        </div>

        <!-- åˆ†ç±»ç»Ÿè®¡ -->
        <div class="chart-card">
            <div class="chart-card__header">
                <h3 class="chart-card__title">æ”¯å‡ºåˆ†ç±»</h3>
            </div>
            <div class="chart-card__body">
                <div class="category-chart-container">
                    <canvas id="categoryChart" height="280"></canvas>
                </div>
                <div class="category-stats" id="categoryStats">
                    <!-- åˆ†ç±»ç»Ÿè®¡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScriptæ–‡ä»¶ -->
    <script src="./js/components/charts.js"></script>
    
    <script>
        // æµ‹è¯•è„šæœ¬
        document.addEventListener('DOMContentLoaded', () => {
            // åˆ›å»ºå›¾è¡¨ç®¡ç†å™¨
            const chartManager = new ChartManager();
            window.chartManager = chartManager;
            
            // åˆå§‹åŒ–å›¾è¡¨
            setTimeout(() => {
                chartManager.initializeTrendChart();
                chartManager.initializeCategoryChart();
            }, 500);
            
            // æ—¶é—´ç­›é€‰å™¨åŠŸèƒ½
            document.addEventListener('click', (e) => {
                if (e.target.matches('.filter-tab')) {
                    // æ›´æ–°æŒ‰é’®çŠ¶æ€
                    document.querySelectorAll('.filter-tab').forEach(tab => {
                        tab.classList.remove('filter-tab--active');
                    });
                    e.target.classList.add('filter-tab--active');
                    
                    // é‡æ–°åˆå§‹åŒ–å›¾è¡¨
                    setTimeout(() => {
                        chartManager.initializeTrendChart();
                        chartManager.initializeCategoryChart();
                    }, 100);
                }
            });
            
            console.log('ğŸ“Š ç»Ÿè®¡é¡µé¢å›¾è¡¨æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
        });
    </script>
</body>
</html>